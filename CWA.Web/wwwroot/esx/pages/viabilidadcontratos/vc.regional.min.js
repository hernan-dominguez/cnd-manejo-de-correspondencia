if($("#cwa-solicitud-select").change(function(){const n=$(this).val();if($("#cwa-transaccion-select").empty().append('<option value="">Seleccione un valor...<\/option>'),$(".cwa-doc-row").remove(),n){$(cwa.page.tipos.solicitudTransacccion).each(function(){const t=this;n==t.solicitud&&$(cwa.page.tipos.transacciones).each(function(){t.transaccion==this.id&&$("#cwa-transaccion-select").append('<option value="'+this.id+'">'+this.descripcion+"<\/option>")})});var t=0;$(cwa.page.docs.doctipos).each(function(){const i=this;n==i.solicitud&&$(cwa.page.docs.documentos).each(function(){const n=this;var r="cwa-documentos";i.documento==n.id&&(r=cwa.page.functions.createBinded(n.id,n.descripcion,n.accepts,t,r),t++)})})}$("#cwa-transaccion-select option").length==2&&$("#cwa-transaccion-select option").first().remove()}),$("#cwa-pais-select").change(function(){const n=$(this).val();$("#cwa-contraparte-select").empty().append('<option value="">Seleccione un valor...<\/option>');n&&$(cwa.page.contrapartes).each(function(){const t=this;n==t.paisId&&$("#cwa-contraparte-select").append('<option value="'+t.id+'">'+t.nombre+"<\/option>")})}),cwa.page.functions={createBinded:function(n,t,i,r,u){const f="cwa-documento-"+r,e="EditModel_Documentos_"+r+"__DocumentUpload",o="EditModel.Documentos["+r+"].DocumentUpload",s="EditModel_Documentos_"+r+"__TipoDocumentoId",h="EditModel.Documentos["+r+"].TipoDocumentoId",c='<input class="form-control" type="file" data-val="true" data-val-required="El documento es requerido" id="'+e+'" name="'+o+'" accept="'+i+'" />',l='<input type="hidden" data-val="true" data-val-required="El tipo de documento es requerido." id="'+s+'" name="'+h+'" value="'+n+'" />',a='<span id="EditModel-Documentos-'+r+'-DocumentUpload" class="text-danger cwa-small">&nbsp<\/span>',v='<div id="'+f+'" class="row cwa-doc-row"><div class="col-12 mb-3"><label for="'+e+'">'+t+"<\/label>"+c+a+l+"<\/div>";return $(v).insertAfter("#"+u),f}},cwa.page.ct={update:$("#cwa-update-button"),approve:$("#cwa-approve-button"),reject:$("#cwa-reject-button"),approval:$("#cwa-approval-button"),rejection:$("#cwa-rejection-button"),back:$("#cwa-back-link"),file:$("#cwa-adjunto-aprobacion"),text:$("#cwa-motivo-rechazo")},cwa.page.showUpdate&&$(cwa.page.ct.update).click(function(){cwa.dialog.ask(cwa.page.strings.guardar,"#cwa-update-form",function(){cwa.page.jsonResult.success==!0&&document.querySelector("#cwa-back-link").click()})}),cwa.page.showApprove==!0&&($(cwa.page.ct.approve).click(function(){cwa.dialog.ask(cwa.page.strings.aprobar,"#cwa-approve-form")}),cwa.page.showFile==!0))$(cwa.page.ct.file).on("show.bs.collapse",function(){$(cwa.page.ct.approval).removeClass("btn-success").addClass("btn-danger").find("span").text("Cancelar");$(cwa.page.ct.approve).show();$(cwa.page.ct.rejection).hide();$(cwa.page.ct.back).hide()}).on("hide.bs.collapse",function(){$(cwa.page.ct.approval).removeClass("btn-danger").addClass("btn-success").find("span").text("Aprobaci√≥n");$(cwa.page.ct.approve).hide();$(cwa.page.ct.rejection).show();$(cwa.page.ct.back).show()});if(cwa.page.showApprove==!0){$(cwa.page.ct.reject).click(function(){cwa.dialog.ask(cwa.page.strings.rechazar,"#cwa-reject-form")});$(cwa.page.ct.text).on("show.bs.collapse",function(){$(cwa.page.ct.rejection).find("span").text("Cancelar");$(cwa.page.ct.reject).show();$(cwa.page.ct.approve).hide();$(cwa.page.ct.approval).hide();$(cwa.page.ct.back).hide()}).on("hide.bs.collapse",function(){$(cwa.page.ct.rejection).find("span").text("Rechazo");$(cwa.page.ct.reject).hide();$(cwa.page.ct.approval).show();$(cwa.page.ct.back).show();cwa.page.showFile==!1&&$(cwa.page.ct.approve).show()}).on("shown.bs.collapse",function(){$("textarea").trigger("focus")})}cwa.page.complete=function(){if(cwa.page.jsonResult.success==!0){if(cwa.page.jsonResult.content=="update"&&$(".cwa-small").html("&nbsp;"),cwa.page.jsonResult.content.status=="approved"){if(cwa.settext("#cwa-approve-date",cwa.page.jsonResult.timeString),cwa.settext("#cwa-approved",cwa.page.strings.aprobado),$("#cwa-approved-icon").hasClass("bi-clock-fill")&&($("#cwa-approved-icon").removeClass("bi-clock-fill").removeClass("text-warning"),$("#cwa-approved-icon").addClass("bi-check-circle-fill").addClass("text-success")),cwa.page.jsonResult.content.docId){const t=cwa.page.jsonResult.id,n=cwa.page.jsonResult.content.docId,i=cwa.page.jsonResult.content.docName;if(n!=="0"){const r="<div class='col-12'><a class='cwa-no-underline' href='/ViabilidadContratos/Regional/"+t+"/Download/"+n+"'>"+i+"<\/a><\/div>";$("#cwa-regional-docs").append(r)}}$(cwa.page.ct.back).show();$(cwa.page.ct.approval).remove();$(cwa.page.ct.rejection).remove();$(cwa.page.ct.approve).remove();$(cwa.page.ct.reject).remove();$(cwa.page.ct.update).remove();$(cwa.page.ct.file).remove();$(cwa.page.ct.text).remove()}cwa.page.jsonResult.content.status=="rejected"&&(cwa.settext("#cwa-approve-date",cwa.page.jsonResult.timeString),cwa.settext("#cwa-approved",cwa.page.strings.noaprobado),$("#cwa-approved-icon").hasClass("bi-clock-fill")&&($("#cwa-approved-icon").removeClass("bi-clock-fill").removeClass("text-warning"),$("#cwa-approved-icon").addClass("bi-exclamation-circle-fill").addClass("text-danger")),cwa.settext("#cwa-motivo-span",$("textarea").val()),$("#cwa-motivo-div").removeClass("d-none"),$(cwa.page.ct.back).show(),$(cwa.page.ct.approval).remove(),$(cwa.page.ct.rejection).remove(),$(cwa.page.ct.approve).remove(),$(cwa.page.ct.reject).remove(),$(cwa.page.ct.update).remove(),$(cwa.page.ct.text).remove())}else cwa.page.jsonResult.content&&cwa.setErrorMessages(cwa.page.jsonResult.content)};