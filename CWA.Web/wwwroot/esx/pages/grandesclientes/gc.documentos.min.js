$("#cwa-documento-select").change(function(){const n=$("#cwa-documento-select").val();$("#cwa-fileupload").replaceWith($("#cwa-fileupload").val("").clone(!0));n?($("#cwa-fileupload").prop("disabled",!1),$(cwa.page.documentosDisponibles).each(function(){n==this.id&&($("#cwa-fileupload").prop("disabled",!1),$("#cwa-fileupload").attr("accept","."+this.extensiones.replace(",",",.")))})):$("#cwa-fileupload").prop("disabled",!0)});cwa.page.showUpdate==!0&&$("#cwa-update-button").click(function(){cwa.page.complete=cwa.page.upload.complete;cwa.dialog.ask(cwa.page.strings.guardar,"#cwa-update-form")});cwa.page.showApprove&&$("#cwa-approve-button").click(function(){cwa.page.complete=cwa.page.approve.complete;cwa.dialog.ask(cwa.page.strings.aprobar,"#cwa-approve-form")});cwa.page.upload={complete:function(){var n,i,r,u,f,t,e;cwa.page.jsonResult.success==!0?(n=cwa.copy(cwa.page.jsonResult.content),i=$('tr[data-cwa-rid="'+n.id+'"]'),$(".cwa-small").html("&nbsp;"),$(i).length==1?($(i).find("td").eq(0).find("a").eq(0).html(n.descripcion),$(i).find("td").eq(1).find("span").eq(0).text(n.actualizado),r=$(i).find("td").eq(2).find("span").eq(0),u=$(i).find("td").eq(3).find("span").eq(0),n.autoAccepted==!0?(r.replaceWith('<span><i class="bi-check-circle-fill text-success"><\/i> '+cwa.page.strings.aprobado+"<\/span>"),u.text(n.aprobado)):r.replaceWith('<span><i class="bi-clock-fill text-warning"><\/i> '+cwa.page.strings.pendiente+"<\/span>"),$("#cwa-documento-table tbody").prepend($(i))):(f=$("#cwa-link-template").attr("href")+"/"+n.id,t=$('<tr data-cwa-rid="'+n.id+'">'),$(t).append('<td class="align-middle"><a href="'+f+'">'+n.descripcion+"<\/a><\/td>"),$(t).append('<td class="align-middle"><span>'+n.actualizado+"<\/span><\/td>"),n.autoAccepted==!0?($(t).append('<td class="align-middle"><span><i class="bi-check-circle-fill text-success"><\/i> '+cwa.page.strings.aprobado+"<\/span><\/td>"),$(t).append('<td class="align-middle"><span>'+n.aprobado+" <\/span><\/td>"),$("#cwa-radio-th").length&&$(t).append("<td><span>&nbsp;<\/span><\/td>")):($(t).append('<td class="align-middle"><span><i class="bi-clock-fill text-warning"><\/i> '+cwa.page.strings.pendiente+"<\/span><\/td>"),$(t).append('<td class="align-middle"><span>&nbsp;<\/span><\/td>')),n.autoAccepted==!1&&cwa.page.userApprove&&($("#cwa-radio-th").length==0&&($("#cwa-documento-table thead tr").append('<th id="cwa-radio-th" class="text-center">Seleccionar<\/th>'),e='<button id="cwa-approve-button" type="button" class="btn btn-sm btn-success me-1" style="width: 100px;"><span>Aprobar<\/span><\/button>',$(e).insertAfter("#cwa-update-button"),$("#cwa-approve-button").click(function(){cwa.page.complete=cwa.page.approve.complete;cwa.dialog.ask(cwa.page.strings.aprobar,"#cwa-approve-form")})),$(t).append('<td class="text-center align-middle"><input class= "form-check-input" type="radio" value= "'+n.id+'" id="DocumentoId" name ="DocumentoId"><\/td>'),$("#cwa-documento-table tbody tr").each(function(){$(this).find("td").length==4&&$(this).append("<td><span>&nbsp;<\/span><\/td>")})),$("#cwa-documento-table tbody").prepend(t)),cwa.clearForm("#cwa-update-form"),$("#cwa-fileupload").prop("disabled",!0)):cwa.page.jsonResult.content&&cwa.setErrorMessages(cwa.page.jsonResult.content)}};cwa.page.approve={complete:function(){var t,n,i;if(cwa.page.jsonResult.content&&(t=cwa.copy(cwa.page.jsonResult),n=$('tr[data-cwa-rid="'+t.id+'"]'),$(n).length==1)){var r=$(n).find("td").eq(0).find("a").eq(0),u=$(n).find("td").eq(2).find("span").eq(0),f=$(n).find("td").eq(3).find("span").eq(0),e=$(n).find("td").eq(4);u.replaceWith('<span><i class="bi-check-circle-fill text-success"><\/i> '+cwa.page.strings.aprobado+"<\/span>");f.text(t.timeString);e.html("<span>&nbsp;<\/span>");$("#cwa-documento-select option").each(function(){$(this).text()==r.text()&&(i=this)});$(i).remove();$("i.text-warning").length==0&&($("#cwa-radio-th").remove(),$("#cwa-documento-table tbody td:last-child").remove(),$("#cwa-approve-button").remove());$("#cwa-documento-select option").length==1&&($("#cwa-update-form").remove(),$("#cwa-update-button").remove())}}};